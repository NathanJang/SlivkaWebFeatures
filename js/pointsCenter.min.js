var pointsCenter=function(a){var b,d,e,f="Other",g=!1,i="9/24",j="12/6",k=["Co-Rec Dodgeball","Co-Rec Football","Co-Rec Volleyball","White Dodgeball","White Football","White Volleyball"],l={updateValidity:function(a,b){b?a.addClass("success").removeClass("error"):a.removeClass("success").addClass("error")}},m={init:function(){a(".nav li").eq(0).addClass("active"),a.getJSON("ajax/getSlivkans.php",function(c){b=c.slivkans;for(var d=0;d<b.full_name.length;d++)a("<option />").attr("value",b.nu_email[d]).text(b.full_name[d]).appendTo("#slivkan");localStorage.spc_brk_slivkan&&(a("#slivkan").val(localStorage.spc_brk_slivkan),m.getSlivkanPoints()),localStorage.spc_brk_showUnattended||a("#showUnattended").click()}),a("#start").datepicker({showOn:"button",dateFormat:"m/d",altField:"#start-val",altFormat:"yy-mm-dd",minDate:i,maxDate:localStorage.spc_brk_end||j,onSelect:function(b){a(".range").removeClass("active"),a("#end").datepicker("option","minDate",b),localStorage.spc_brk_start=b,m.fixDateButtons(),m.getSlivkanPoints()}}),a("#end").datepicker({showOn:"button",dateFormat:"m/d",altField:"#end-val",altFormat:"yy-mm-dd",minDate:localStorage.spc_brk_start||i,maxDate:j,onSelect:function(b){a(".range").removeClass("active"),a("#start").datepicker("option","maxDate",b),localStorage.spc_brk_end=b,m.fixDateButtons(),m.getSlivkanPoints()}}),a("#start").datepicker("setDate",localStorage.spc_brk_start||i),a("#end").datepicker("setDate",localStorage.spc_brk_end||j),m.fixDateButtons(),a("#slivkan").on("change",function(){m.getSlivkanPoints()}),a("#start-label").on("click",function(){a("#start").datepicker("show")}),a("#end-label").on("click",function(){a("#end").datepicker("show")}),a("#today").on("click",function(){m.dateRange("0d")}),a("#week").on("click",function(){m.dateRange("-1w")}),a("#month").on("click",function(){m.dateRange("-1m")}),a("#quarter").on("click",function(){m.dateRange(i)}),a("#showUnattended").on("click",function(a){m.toggleShowUnattended(a)})},dateRange:function(b){a("#start").datepicker("setDate",b),a("#end").datepicker("setDate",j),m.getSlivkanPoints()},fixDateButtons:function(){a("button.ui-datepicker-trigger").each(function(){a(this).hasClass("btn")||a(this).addClass("btn").html('<i class="icon-calendar"></i>')})},toggleShowUnattended:function(b){b.target.checked?(a("#unattended-col").show("slideup"),localStorage.spc_brk_showUnattended=1):(a("#unattended-col").hide("slideup"),localStorage.spc_brk_showUnattended="")},getSlivkanPoints:function(){var b=a("#slivkan").val(),c=a("#start-val").val(),d=a("#end-val").val();localStorage.spc_brk_slivkan=a("#slivkan").val(),a(".slivkan-submit").html(a("#slivkan option:selected").html()),a("#breakdown").hide("slideup",function(){a("#attended").empty(),a("#unattended").empty(),a.getJSON("ajax/getPointsBreakdown.php",{nu_email:b,start:c,end:d},function(b){var c=b.attended.events;if(c.event_name.length>0)for(var d=c.event_name.length-1;d>=0;d--)a("<tr />").appendTo("#attended"),a("<td />").html(c.event_name[d]).appendTo("#attended tr:last");else a("<tr />").appendTo("#attended"),a("<td />").html("None :(").appendTo("#attended tr:last");if(c=b.unattended.events,c.event_name.length>0)for(var e=c.event_name.length-1;e>=0;e--)a("<tr />").appendTo("#unattended"),a("<td />").html(c.event_name[e]).appendTo("#unattended tr:last");else a("<tr />").appendTo("#unattended"),a("<td />").html("None :D").appendTo("#unattended tr:last");a("#breakdown").show("slidedown");var f=[["Committee","Events Attended"]];for(var g in b.attended.committees)f.push([g,b.attended.committees[g]]);m.drawChart(f,"Attended Events Committee Distribution","attendedByCommittee"),f=[["Committee","Events Unattended"]];for(g in b.unattended.committees)f.push([g,b.unattended.committees[g]]);m.drawChart(f,"Unattended Events Committee Distribution","unattendedByCommittee")})})},drawChart:function(a,b,c){a=google.visualization.arrayToDataTable(a);var d={title:b,chartArea:{left:10,top:40},height:250,width:400},e=new google.visualization.PieChart(document.getElementById(c));e.draw(a,d)}},o={init:function(){a(".nav li").eq(1).addClass("active");var b=[],c=[],d=[],e=[],f=[];a.getJSON("ajax/getPointsTable.php",function(g){f=g.events;for(var h in g.points_table)b.push([h].concat(g.points_table[h]));for(var i=0;i<f.event_name.length;i++){var j=f.event_name[i],k=j.substr(0,j.length-11),l=j.substr(j.length-5);e.push(i+2),c.push(k),d.push(l)}var m=[],n=g.events.event_name.length+2;for(i=0;6>i;i++)m.push(n+i);var o=a("#table").dataTable({aaData:b,aoColumnDefs:[{aTargets:[0],sTitle:"Name",sWidth:"130px",sClass:"name"},{aTargets:[1],bVisible:!1},{aTargets:e,sWidth:"14px",fnCreatedCell:function(b,c){"1"==c?a(b).addClass("green"):"1.1"==c||"0.1"==c?(a(b).addClass("gold"),a(b).html(a(b).html().substr(0,1))):("1.2"==c||"0.2"==c)&&(a(b).addClass("blue"),a(b).html(a(b).html().substr(0,1)))}},{aTargets:e.concat(m),sTitle:"",asSorting:["desc","asc"]},{aTargets:m,sClass:"totals",sWidth:"18px"}],bPaginate:!1,bAutoWidth:!1,oLanguage:{sSearch:"Filter by Name:<br/>"},sDom:'<"row-fluid"<"span5 table-info"i><"span3"f><"span2 filter1"><"span2 filter2">><"header-row"><"row-fluid"<"span12"rt>>'});a("#table_info").wrap('<div class="alert alert-info" />'),a("<div />").text("Hover over event names for info, click to sort.").prependTo(".alert-info"),a('<table id="legend" class="legend"><tr class="odd">					<td style="background-color: white;">Colors: </td>					<td class="green">Point</td>					<td class="blue">Committee</td>					<td class="gold">Helper</td>					<td style="background-color: #FF8F8F;">None</td>					</tr></table>').appendTo(".table-info"),a("#table_filter input").addClass("input-medium"),a('<label>Filter by Gender:<br/><select class="input-small" id="gender-filter">						<option value="">All</option>						<option value="m">Male</option>						<option value="f">Female</option>					</select></label>').appendTo(".filter1"),a("#gender-filter").on("change",function(){var b=a("#gender-filter").val();o.fnFilter(b,1)}),a('<label>Limit Columns:<br/><select class="input-small" id="count-filter">					<option value="-1">All</option>					<option value="30">30</option>					<option value="20">20</option>					<option value="10">10</option>					</select></label>').appendTo(".filter2"),a("#count-filter").on("change",function(b){for(var c=b.target.value,d=a("#table").dataTable(),f=a("#columns").find("li"),g=0;g<e.length;g++)c>g||-1==c?(d.fnSetColumnVis(e.length-g+2,!0,!1),f.eq(e.length-g).show()):(d.fnSetColumnVis(e.length-g+2,!1,!1),f.eq(e.length-g).hide());d.fnDraw();var h=200+16*(-1==c?e.length:c)+20*m.length;a("body").css("min-width",h)});var p=200+17*e.length+21*m.length;for(a(".container-fluid").css("min-width",p+"px"),p>1e3&&a(".container-fluid").css("max-width","none"),a(".header-row").attr("id","columns"),i=0;i<c.length;i++)a("<li />").html(c[i]).popover({trigger:"hover",html:!0,title:c[i],content:"Date: "+d[i]+"<br/>Attendees: "+f.attendees[i]+(f.description[i].length>0?"<br/>Description: "+f.description[i]:""),placement:"bottom",container:"#table"}).appendTo("#columns");a("<li />").addClass("totals-label").html("Events Total").appendTo("#columns"),a("<li />").addClass("totals-label").html("Helper Points").appendTo("#columns"),a("<li />").addClass("totals-label").html("IM Sports").appendTo("#columns"),a("<li />").addClass("totals-label").html("Standing Committees").appendTo("#columns"),a("<li />").addClass("totals-label").html("Position-Related").appendTo("#columns"),a("<li />").addClass("totals-label").html("Total").appendTo("#columns");var q=a("#table").find("th");a("#columns").find("li").each(function(b){a(this).on("click",function(){q.eq(b+1).click()})})})}},p={init:function(){a(".nav li").eq(2).addClass("active"),a.getJSON("ajax/getSlivkans.php",function(c){b=c.slivkans,d=c.nicknames,a("#filled-by").typeahead({source:b.full_name.concat(d.nickname)})}),a.getJSON("ajax/getEvents.php",function(b){event_name=b.event_name;for(var c=0;c<event_name.length;c++)a("<option></option>").text(event_name[c]).appendTo("#event-name")}),a("#filled-by").on("focusout",function(){p.validateFilledBy()}),a("#submit").on("click",function(){p.validatePointsCorrectionForm()}),a("#reset").on("click",function(){p.resetForm()})},validatePointsCorrectionForm:function(){var b=!0,c=[];p.validateFilledBy()||(b=!1,c.push("Your Name")),"Select One"==a("#event-name").val()&&(b=!1,c.push("Event Name")),b?p.submitPointsCorrection():a("#submit-error").text("Validation errors in: "+c.join(", ")).fadeIn()},validateFilledBy:function(){var c,e=a("#filled-by").val();return-1!=d.nickname.indexOf(e)&&(e=d.full_name[d.nickname.indexOf(e)],a("#filled-by").val(e)),a(".filled-by-control").removeClass("warning"),e.length>0?(c=-1!=b.full_name.indexOf(e),l.updateValidity(a(".filled-by-control"),c)):(a(".filled-by-control").addClass("error"),c=!1),c},resetForm:function(){a("#filled-by").val(""),a(".filled-by-control").removeClass("success").removeClass("error"),a("#event-name").val("Select One"),a("#comments").val(""),a("#submit-error").fadeOut()},submitPointsCorrection:function(){var c={event_name:a("#event-name").val(),name:a("#filled-by").val(),sender_email:b.nu_email[b.full_name.indexOf(a("#filled-by").val())],comments:a("#comments").val()};a("#response").fadeOut(),a.getJSON("./ajax/sendPointsCorrection.php",c,function(b){a("#response").html("<p>Response: "+b.message+"</p>"),a('<a href="table.php" class="btn btn-primary">View Points</a>').appendTo("#response"),a('<a class="btn" href="correction.php">Submit Another</a>').appendTo("#response"),a("#response").fadeIn()})}},q={init:function(){a(".nav li").eq(3).addClass("active"),a.getJSON("ajax/getSlivkans.php",function(c){if(b=c.slivkans,d=c.nicknames,e=c.fellows,b.autocomplete=b.full_name.concat(d.nickname),q.appendNameInputs(14),q.appendFellowInputs(9),localStorage.spc_sub_committee&&a("#committee").val(localStorage.spc_sub_committee),localStorage.spc_sub_attendees){var f=localStorage.spc_sub_attendees;f=f.split(", "),f.length>14&&q.appendNameInputs(f.length-14),q.addSlivkans(f)}localStorage.spc_sub_filledby&&(a("#filled-by").val(localStorage.spc_sub_filledby),q.validateFilledBy()),localStorage.spc_sub_type&&"Other"!=localStorage.spc_sub_type&&a('.type-btn[value="'+localStorage.spc_sub_type+'"]').click(),localStorage.spc_sub_date&&a("#date").datepicker("setDate",localStorage.spc_sub_date),localStorage.spc_sub_name&&(a("#event").val(localStorage.spc_sub_name),q.validateEventName()),localStorage.spc_sub_comments&&a("#comments").val(localStorage.spc_sub_comments),a("#event").on("focus",q.makeHandler.addClassWarning()).on("focusout",function(){q.validateEventName()}),a("#filled-by").typeahead({source:b.autocomplete}).on("focus",q.makeHandler.addClassWarning()).on("focusout",function(){q.validateFilledBy()}),a("#slivkan-entry-tab").on("focus",".slivkan-entry",q.makeHandler.addClassWarning()).on("focusout",".slivkan-entry",q.makeHandler.validateSlivkanName()).on("click",".helper-point",q.makeHandler.toggleActive()).on("click",".committee-point",q.makeHandler.toggleActive()),a("#fellow-entry-tab").find(".fellow-entry").on("focus",q.makeHandler.addClassWarning()).on("focusout",q.makeHandler.validateFellowName())}),a("#date").datepicker({minDate:-5,maxDate:0,dateFormat:"m/d",showOn:"button",buttonText:"",altField:"#date-val",altFormat:"yy-mm-dd",onSelect:function(a){q.validateEventName(),localStorage.spc_sub_date=a}}),a("#date").datepicker("setDate",new Date),a("button.ui-datepicker-trigger").addClass("btn").html('<i class="icon-calendar"></i>');for(var c=0;c<k.length;c++)a("<option />").text(k[c]).appendTo("#im-team");a(".type-btn").on("click",function(a){q.toggleType(a)}),a("#date-label").on("click",function(){a("#date").datepicker("show")}),a("#im-team").on("change",function(){q.validateIMTeam()}),a("#committee").on("change",function(){q.validateCommittee()}),a("#description").on("focusout",function(){q.validateDescription()}),a("#comments").on("focusout",function(){localStorage.spc_sub_comments=a("#comments").val()}),a("#close-sort-alert").on("click",function(){a("#sort-alert").slideUp()}),a("#close-dupe-alert").on("click",function(){a("#duplicate-alert").slideUp()}),a("#sort-entries").on("click",function(){q.sortEntries()}),a("#submit").on("click",function(){q.validatePointsForm()}),a("#reset").on("click",function(){q.resetForm()}),a("#bulk-names").on("keyup",function(){q.processBulkNames()}),a("#add-bulk-names").on("click",function(){q.addBulkNames()}),a("#tabs a:first").tab("show")},makeHandler:{addClassWarning:function(){return function(){a(this).parent().addClass("warning")}},validateSlivkanName:function(){return function(){q.validateSlivkanName(a(this).parent())}},validateFellowName:function(){return function(){q.validateFellowName(a(this).parent())}},toggleActive:function(){return function(){a(this).toggleClass("active"),q.saveSlivkans()}}},appendNameInputs:function(c){for(var d=a("#slivkan-entry-tab").find(".slivkan-entry-control").last(),e=parseInt(d.find(".add-on").text(),10),f=0;c>f;f++)next=d.clone().appendTo("#slivkan-entry-tab").removeClass("warning").find(".add-on").text(e+f+1);a("#slivkan-entry-tab").find(".slivkan-entry").typeahead({source:b.autocomplete}),a("#slivkan-entry-tab").find(".slivkan-entry").last().on("focus",function(){a(this).parent().addClass("warning");var b=a("#slivkan-entry-tab").find(".slivkan-entry").length;a(this).off("focus"),120>b&&q.appendNameInputs(1)})},appendFellowInputs:function(b){for(var c=a("#fellow-entry-tab").find(".fellow-entry-control").last(),d=parseInt(c.find(".add-on").text(),10),f=0;b>f;f++)next=c.clone().appendTo("#fellow-entry-tab").removeClass("warning").find(".add-on").text(d+f+1);a("#fellow-entry-tab").find(".fellow-entry").typeahead({source:e}),a(".fellow-entry").last().on("focus",function(){a(this).parent().addClass("warning");var b=a(".fellow-entry").length;a(this).off("focus"),20>b&&q.appendFellowInputs(1)})},toggleType:function(b){if(f=b.target.value,localStorage.spc_sub_type=f,"IM"==a(".type-btn.active").val()&&(a("#description").val(""),q.validateDescription()),"P2P"==f)a("#committee").val("Faculty"),a("#event").val("P2P");else if("IM"==f){a("#committee").val("Social"),a("#event").val(a("#im-team").val()+" 1");var c=a("#im-team").val().split(" ");a("#description").val(c[1])}else"House Meeting"==f?(a("#committee").val("Exec"),a("#event").val("House Meeting")):a("#event").val("");q.validateEventName(),q.validateCommittee(),"IM"==f?(a(".im-team-control").slideDown(),a("#event").attr("disabled","disabled")):(a(".im-team-control").slideUp(),a("#event").removeAttr("disabled")),"Other"==f?(a(".description-control").slideDown(),a("#committee").removeAttr("disabled")):(a(".description-control").slideUp(),a("#committee").attr("disabled","disabled"))},validatePointsForm:function(){var b=!0,c=[];q.validateFilledBy()||(b=!1,c.push("Filled By")),g||(b=!1,l.updateValidity(a(".event-control"),b),c.push("Name")),q.validateCommittee()||(b=!1,c.push("Committee")),q.validateDescription()||(b=!1,c.push("Description"));var d=!0;a(".slivkan-entry-control").each(function(b){q.validateSlivkanName(a(this),0!==b)||(d=!1)}),d||(b=!1,c.push("Attendees"));var e=!0;return a(".fellow-entry-control").each(function(){q.validateFellowName(a(this))||(e=!1)}),e||(b=!1,c.push("Fellows")),b?(a("#submit-error").fadeOut(),q.submitPointsForm()):a("#submit-error").text("Validation errors in: "+c.join(", ")).fadeIn(),b},validateEventName:function(){var b=!1,c=a("#event").val(),d=[];return localStorage.spc_sub_name=c,g=!1,c.length<=40&&c.length>=8||"P2P"==c?(c+=" "+a("#date-val").val(),a.getJSON("ajax/getEvents.php",function(b){if(a(".event-control").removeClass("warning"),b.event_name.length>0)if(d=b.event_name,-1!=d.indexOf(c))if("IM"==f){var e=parseInt(a("#event").val().slice(-1),10);a("#event").val(a("#event").val().slice(0,-1)+(e+1).toString()),validateEventName()}else g=!1,a("#event-name-error").fadeIn();else g=!0,a("#event-name-error").fadeOut();else g=!0;a("#event-name-length-error").fadeOut(),l.updateValidity(a(".event-control"),g)})):(a("#event-name-length-error-count").html("Currently "+c.length+" characters"),a("#event-name-length-error").fadeIn(),l.updateValidity(a(".event-control"),g)),b},validateIMTeam:function(){a("#event").val(a("#im-team").val()+" 1");var b=a("#im-team").val().split(" ");a("#description").val(b[1]),q.validateEventName()},validateCommittee:function(){var b,c=a("#committee").val();return b="Select One"!=c,l.updateValidity(a(".committee-control"),b),a(".slivkan-entry-control").each(function(){q.validateSlivkanName(a(this),!0)}),q.saveSlivkans(),localStorage.spc_sub_committee=c,b},validateDescription:function(){var b=!0,c=a("#description").val();return localStorage.spc_sub_description=c,c.length<10&&"Other"==f?(b=!1,a("#description-length-error").fadeIn()):a("#description-length-error").fadeOut(),l.updateValidity(a(".description-control"),b),b},validateFilledBy:function(){var c=!0,e=a("#filled-by").val();return localStorage.spc_sub_filledby=e,-1!=d.nickname.indexOf(e)&&(e=d.full_name[d.nickname.indexOf(e)],a("#filled-by").val(e)),a(".filled-by-control").removeClass("warning"),e.length>0?(c=-1!=b.full_name.indexOf(e),l.updateValidity(a(".filled-by-control"),c)):(a(".filled-by-control").addClass("error"),c=!1),c},validateSlivkanName:function(c,e){var g=!0,h=c.find(".slivkan-entry"),i=c.find(".helper-point"),j=c.find(".committee-point"),k=h.val();if(-1!=d.nickname.indexOf(k)&&(k=d.full_name[d.nickname.indexOf(k)],h.val(k)),!e){var m=[];a("#slivkan-entry-tab").find(".slivkan-entry").each(function(){var c=a(this);c.val().length>0&&(-1==m.indexOf(c.val())?m.push(c.val()):(c.val(""),a("#duplicate-alert").slideDown(),q.validateSlivkanName(c.parent(),!0)))}),0===m.length&&(g=!1),q.saveSlivkans(),k=h.val()}return c.removeClass("warning"),k.length>0?(name_ind=b.full_name.indexOf(k),-1!=name_ind?b.committee[name_ind]==a("#committee").val()&&"IM"!=f?q.showCommitteeMember(i,j,e):"IM"==f||"Facilities"==b.committee[name_ind]||"Exec"==b.committee[name_ind]?q.hideButtons(i,j,e):q.showHelperPoint(i,j,e):g=!1,l.updateValidity(c,g)):(c.removeClass("success").removeClass("error"),q.hideButtons(i,j,e)),g},showHelperPoint:function(a,b,c){"none"==a.css("display")&&(b.removeClass("active"),c?(b.hide(),a.show()):b.hide("slide",function(){a.show("slide")}))},showCommitteeMember:function(a,b,c){"none"==b.css("display")&&(a.removeClass("active"),c?(a.hide(),b.show()):a.hide("slide",function(){b.show("slide")}),b.addClass("active"))},hideButtons:function(a,b,c){a.removeClass("active"),b.removeClass("active"),c?(a.hide(),b.hide()):(a.hide("slide"),b.hide("slide"))},validateFellowName:function(b){var c=!0,d=[],f=b.find(".fellow-entry"),g=f.val();return a(".fellow-entry").each(function(){-1!=d.indexOf(a(this).val())&&(a(this).val(""),g="",a("#duplicate-alert").slideDown()),a(this).val().length>0&&d.push(a(this).val())}),b.removeClass("warning"),g.length>0?(c=-1!=e.indexOf(g),l.updateValidity(b,c)):b.removeClass("success").removeClass("error"),c},processBulkNames:function(){names=a("#bulk-names").val(),names=names.replace(/(\d+ .+ago[\r\n]?$)|(^[\r\n])/gm,""),a("#bulk-names").val(names)},addBulkNames:function(){var c=[],d=0;if(a("#slivkan-entry-tab").find(".slivkan-entry").each(function(){a(this).val().length>0?c.push(1):(c.push(0),d++)}),names=a("#bulk-names").val(),("\r"==names[names.length-1]||"\n"==names[names.length-1])&&(names=names.slice(0,names.length-1)),nameArray=names.split(/[\r\n]/gm),nameArray.length>=d){n=nameArray.length-d+1,q.appendNameInputs(n);for(var e=0;n>e;e++)c.push(0)}for(var f=a("#slivkan-entry-tab").find(".slivkan-entry"),g=nameArray.length,h=0;g>h;h++){var i=nameArray[h];wildcardInd=b.wildcard.indexOf(i),-1!=wildcardInd&&(i=b.full_name[wildcardInd]),ind=c.indexOf(0),c[ind]=1,f.eq(ind).val(i),q.validateSlivkanName(f.eq(ind).parent(),g-1>h)}},sortEntries:function(){var b=[];b=q.saveSlivkans(),a("#slivkan-entry-tab").find(".slivkan-entry").val(""),a(".committee-point").removeClass("active"),a(".helper-point").removeClass("active"),b=b.sort(),q.addSlivkans(b),a("#sort-alert").slideDown()},saveSlivkans:function(){var b=[];return a("#slivkan-entry-tab").find(".slivkan-entry-control").each(function(){var d=a(this),e=d.find(".slivkan-entry").val();e.length>0&&(h=d.find(".helper-point").hasClass("active")?"1":"0",c=d.find(".committee-point").hasClass("active")?"1":"0",b.push(e+h+c))}),localStorage.spc_sub_attendees=b.join(", "),b},addSlivkans:function(b){for(var d=a("#slivkan-entry-tab").find(".slivkan-entry-control"),e=b.length,f=0;e>f;f++){var g=b[f].slice(0,b[f].length-2);h=b[f].slice(b[f].length-2,b[f].length-1),c=b[f].slice(b[f].length-1),entry=d.eq(f),entry.find(".slivkan-entry").val(g),q.validateSlivkanName(entry,e-1>f),"1"==h&&entry.find(".helper-point").addClass("active"),"0"==c&&entry.find(".committee-point").removeClass("active")}for(f;f<d.length;f++)q.validateSlivkanName(d.eq(f),!0)},resetForm:function(b){(b||confirm("Reset form?"))&&(a(".type-btn").last().click(),a("#event").val(""),a(".event-control").removeClass("success").removeClass("error"),a("#description").val(""),a(".description-control").removeClass("success").removeClass("error"),a("#committee").val("Select One"),a(".committee-control").removeClass("success").removeClass("error"),a("#filled-by").val(""),a(".filled-by-control").removeClass("success").removeClass("error"),a("#comments").val(""),a("#slivkan-entry-tab").find(".slivkan-entry-control").slice(15).remove(),a("#slivkan-entry-tab").find(".slivkan-entry-control").each(function(){a(this).find(".slivkan-entry").val(""),q.validateSlivkanName(a(this),!0)}),q.validateSlivkanName(a(".slivkan-entry-control").last()),a(".fellow-entry").each(function(){a(this).val(""),q.validateFellowName(a(this).parent())}),a("#event-name-error").fadeOut(),a("#event-name-length-error").fadeOut(),a("#description-length-error").fadeOut(),a("#duplicate-error").fadeOut(),a("#submit-error").fadeOut(),localStorage.spc_sub_filledby="",localStorage.spc_sub_type="",localStorage.spc_sub_name="",localStorage.spc_sub_committee="",localStorage.spc_sub_comments="",localStorage.spc_sub_attendees="")},submitPointsForm:function(){var c={date:a("#date-val").val(),type:f.toLowerCase().replace(" ","_"),committee:a("#committee").val(),event_name:a("#event").val(),description:a("#description").val(),filled_by:b.nu_email[b.full_name.indexOf(a("#filled-by").val())],comments:a("#comments").val(),attendees:[],helper_points:[],committee_members:[],fellows:[]};a("#slivkan-entry-tab").find(".slivkan-entry").each(function(){var e=a(this).val();e.length>0&&(name_ind=b.full_name.indexOf(e),c.attendees.push(b.nu_email[name_ind]),a(this).parent().find(".helper-point").hasClass("active")?c.helper_points.push(b.nu_email[name_ind]):a(this).parent().find(".committee-point").hasClass("active")&&c.committee_members.push(b.nu_email[name_ind]))}),a(".fellow-entry").each(function(){a(this).val().length>0&&c.fellows.push(a(this).val())}),a(".results-row").remove();for(var d in c)val="attendees"==d||"helper_points"==d||"committee_members"==d||"fellows"==d?c[d].join(", "):c[d],a('<tr class="results-row" />').append(a('<td class="results-label" />').html(d)).append(a('<td class="results" />').html(val)).appendTo("#receipt tbody");a("#submit-results").modal({show:!0}).on("shown",function(){a("body").css("overflow","hidden")}).on("hidden",function(){a("body").css("overflow","auto")}),a("#real-submit").off("click"),a("#real-submit").on("click",function(){a.getJSON("./ajax/submitPointsForm.php",c,function(b){a("#results-status").parent().removeClass("warning"),b.error?a("#results-status").html("Error in Step "+b.step).parent().addClass("error"):(a("#unconfirmed").fadeOut({complete:function(){a("#confirmed").fadeIn()}}),a("#results-status").html("Success!").parent().addClass("success"),q.resetForm("force"))})})}};return{breakdown:m,table:o,correction:p,submission:q}}(jQuery);